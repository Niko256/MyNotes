Секции релокаций - это специальные структуры данных, находящиеся в объектном файле, которые содержат всю необходимую информацию для корректировки адресов и ссылок в объектном файле на этапе линковки.

Релокация - это процесс корректировки адресов символов в коде, чтобы он мог быть загружен в память по правильным адресам. Это необходимо, потому что окончательные адреса символов неизвестны до тех пор, пока программа не будет загружена в память.


Линкер использует информацию из секций релокаций для корректировки адресов и ссылок в объектном файле, чтобы они соответствовали их итоговому расположению в исполняемом файле.


Рассмотрим следующий пример:

``` C
extern int global_var;

int main() {
	return global_var;
}
```


- Компилятор в результате своей работы генерирует объектный файл с относительным адресом переменной `global_var` и соответствующей записью в секции релокации `.rela.text`.

- Линкер объединит объектный данный файл с другим объектным файлом, содержащим определение переменной `global_var`. Он будет использовать информацию из секции релокации для корректировки адреса данной переменной в объектном файле.

- Загрузчик загрузит исполняемый файл, полученный после линковки и будет использовать информацию из секции релокации для корректировки адресов. Он также будет искать символ `global_var` в таблице символов.


Также в Linux есть утилита под названием `readelf`, которая позволяет просматривать различные части `ELF` файлов, в том числе секции релокаций.

``` bash
readelf -r <name_of_file>

Relocation section '.rela.dyn' at offset 0x2590 contains 13 entries:
  Offset          Info           Type           Sym. Value    Sym. Name + Addend
00000000ed78  000000000008 R_X86_64_RELATIVE                    3320
00000000ed80  000000000008 R_X86_64_RELATIVE                    32d0
00000000f108  000000000008 R_X86_64_RELATIVE                    f108
00000000efb0  000500000006 R_X86_64_GLOB_DAT 0000000000000000 __cxa_finalize@GLIBC_2.2.5 + 0
00000000efb8  000700000006 R_X86_64_GLOB_DAT 0000000000000000 
...

00000000f120  003500000005 R_X86_64_COPY     000000000000f120 _ZSt4cerr@GLIBCXX_3.4 + 0

Relocation section '.rela.plt' at offset 0x26c8 contains 32 entries:
  Offset          Info           Type           Sym. Value    Sym. Name + Addend
00000000f000  000100000007 R_X86_64_JUMP_SLO 0000000000000000 _ZNKSt10filesyste[...]@GLIBCXX_3.4.26 + 0
00000000f008  000200000007 R_X86_64_JUMP_SLO 0000000000000000 00000000f0e8  002400000007 R_X86_64_JUMP_SLO 0000000000000000 __cxa_throw@CXXABI_1.3 + 0
00000000f0f0  002600000007 R_X86_64_JUMP_SLO 0000000000000000 _Unwind_Resume@GCC_3.0 + 0
00000000f0f8  002900000007 R_X86_64_JUMP_SLO 0000000000000000 _ZNSt14basic_ofst[...]@GLIBCXX_3.4.21 + 0
```

Процесс релокации включает в себя чтение секции релокации, поиск символов в таблице символов, вычисление правильных адресов и запись этих адресов в соответствующие места в памяти.